<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ç®¡ç†é¡µé¢è°ƒè¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .debug-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            margin: 5px 0;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .warning { background-color: #fff3cd; color: #856404; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ç”¨æˆ·ç®¡ç†é¡µé¢è°ƒè¯•å·¥å…·</h1>
    
    <div class="debug-section">
        <h2>ç¯å¢ƒæ£€æŸ¥</h2>
        <button onclick="checkEnvironment()">æ£€æŸ¥ç¯å¢ƒå˜é‡</button>
        <button onclick="checkAPI()">æ£€æŸ¥APIçŠ¶æ€</button>
        <div id="env-results"></div>
    </div>
    
    <div class="debug-section">
        <h2>é¡µé¢çŠ¶æ€æ£€æŸ¥</h2>
        <button onclick="checkPageStatus()">æ£€æŸ¥é¡µé¢çŠ¶æ€</button>
        <button onclick="checkNetworkRequests()">æ£€æŸ¥ç½‘ç»œè¯·æ±‚</button>
        <div id="page-results"></div>
    </div>
    
    <div class="debug-section">
        <h2>æ‰‹åŠ¨æµ‹è¯•</h2>
        <button onclick="testMockAPI()">æµ‹è¯•æ¨¡æ‹ŸAPI</button>
        <button onclick="forceReload()">å¼ºåˆ¶é‡æ–°åŠ è½½</button>
        <div id="test-results"></div>
    </div>

    <script>
        function log(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `status ${type}`;
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            container.appendChild(logEntry);
        }

        function clearResults(containerId) {
            document.getElementById(containerId).innerHTML = '';
        }

        function checkEnvironment() {
            clearResults('env-results');
            log('env-results', 'ğŸ” æ£€æŸ¥ç¯å¢ƒå˜é‡...', 'info');
            
            const commands = `
// åœ¨ä¸»åº”ç”¨é¡µé¢æ§åˆ¶å°è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

// 1. æ£€æŸ¥ç¯å¢ƒå˜é‡
console.log('VITE_ENABLE_AUTH:', import.meta.env.VITE_ENABLE_AUTH);
console.log('NODE_ENV:', import.meta.env.NODE_ENV);
console.log('æ‰€æœ‰ç¯å¢ƒå˜é‡:', import.meta.env);

// 2. æ£€æŸ¥å½“å‰è·¯ç”±
console.log('å½“å‰è·¯ç”±:', $route.path);
console.log('è·¯ç”±å‚æ•°:', $route.params);
console.log('è·¯ç”±æŸ¥è¯¢:', $route.query);
            `;
            
            const codeBlock = document.createElement('div');
            codeBlock.className = 'code-block';
            codeBlock.textContent = commands;
            document.getElementById('env-results').appendChild(codeBlock);
        }

        function checkAPI() {
            clearResults('env-results');
            log('env-results', 'ğŸ” æ£€æŸ¥APIçŠ¶æ€...', 'info');
            
            const commands = `
// åœ¨ä¸»åº”ç”¨é¡µé¢æ§åˆ¶å°è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

// 1. æ£€æŸ¥APIå¯¼å…¥
try {
    // è¿™éœ€è¦åœ¨Vueç»„ä»¶å†…éƒ¨è¿è¡Œ
    console.log('APIæ£€æŸ¥éœ€è¦åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢çš„Vueç»„ä»¶å†…è¿è¡Œ');
} catch (error) {
    console.error('APIæ£€æŸ¥å¤±è´¥:', error);
}

// 2. æ‰‹åŠ¨æµ‹è¯•APIè°ƒç”¨
fetch('/api/users', {
    method: 'GET',
    headers: {
        'Content-Type': 'application/json'
    }
}).then(response => {
    console.log('APIå“åº”çŠ¶æ€:', response.status);
    return response.json();
}).then(data => {
    console.log('APIå“åº”æ•°æ®:', data);
}).catch(error => {
    console.error('APIè°ƒç”¨å¤±è´¥:', error);
});
            `;
            
            const codeBlock = document.createElement('div');
            codeBlock.className = 'code-block';
            codeBlock.textContent = commands;
            document.getElementById('env-results').appendChild(codeBlock);
        }

        function checkPageStatus() {
            clearResults('page-results');
            log('page-results', 'ğŸ” æ£€æŸ¥é¡µé¢çŠ¶æ€...', 'info');
            
            const commands = `
// åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢æ§åˆ¶å°è¿è¡Œï¼š

// 1. æ£€æŸ¥é¡µé¢å…ƒç´ 
const userContainer = document.querySelector('.users-container');
console.log('ç”¨æˆ·å®¹å™¨:', userContainer ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');

const loadingElements = document.querySelectorAll('.el-loading-mask');
console.log('åŠ è½½é®ç½©æ•°é‡:', loadingElements.length);

const tableRows = document.querySelectorAll('.el-table__row');
console.log('è¡¨æ ¼è¡Œæ•°:', tableRows.length);

// 2. æ£€æŸ¥Vueç»„ä»¶çŠ¶æ€
if (window.__VUE_DEVTOOLS_GLOBAL_HOOK__) {
    console.log('Vue DevToolså¯ç”¨');
} else {
    console.log('Vue DevToolsä¸å¯ç”¨');
}

// 3. æ£€æŸ¥é”™è¯¯ä¿¡æ¯
const errors = document.querySelectorAll('.el-message--error');
console.log('é”™è¯¯æ¶ˆæ¯æ•°é‡:', errors.length);
            `;
            
            const codeBlock = document.createElement('div');
            codeBlock.className = 'code-block';
            codeBlock.textContent = commands;
            document.getElementById('page-results').appendChild(codeBlock);
        }

        function checkNetworkRequests() {
            clearResults('page-results');
            log('page-results', 'ğŸ” æ£€æŸ¥ç½‘ç»œè¯·æ±‚...', 'info');
            
            log('page-results', 'è¯·æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Networkæ ‡ç­¾é¡µï¼Œç„¶ååˆ·æ–°ç”¨æˆ·ç®¡ç†é¡µé¢', 'info');
            log('page-results', 'æŸ¥çœ‹æ˜¯å¦æœ‰å¤±è´¥çš„è¯·æ±‚æˆ–é•¿æ—¶é—´pendingçš„è¯·æ±‚', 'warning');
        }

        function testMockAPI() {
            clearResults('test-results');
            log('test-results', 'ğŸ§ª æµ‹è¯•æ¨¡æ‹ŸAPI...', 'info');
            
            const commands = `
// åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢æ§åˆ¶å°è¿è¡Œï¼š

// 1. ç›´æ¥è°ƒç”¨æ¨¡æ‹ŸAPI
import { mockUsersApi } from '@/api/mock/users';

// æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨
mockUsersApi.getUsers().then(result => {
    console.log('æ¨¡æ‹ŸAPIæµ‹è¯•æˆåŠŸ:', result);
}).catch(error => {
    console.error('æ¨¡æ‹ŸAPIæµ‹è¯•å¤±è´¥:', error);
});

// 2. æµ‹è¯•ç»Ÿè®¡æ•°æ®
mockUsersApi.getUserStatistics().then(stats => {
    console.log('ç»Ÿè®¡æ•°æ®:', stats);
}).catch(error => {
    console.error('ç»Ÿè®¡æ•°æ®è·å–å¤±è´¥:', error);
});
            `;
            
            const codeBlock = document.createElement('div');
            codeBlock.className = 'code-block';
            codeBlock.textContent = commands;
            document.getElementById('test-results').appendChild(codeBlock);
        }

        function forceReload() {
            clearResults('test-results');
            log('test-results', 'ğŸ”„ å¼ºåˆ¶é‡æ–°åŠ è½½...', 'info');
            
            const commands = `
// åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢æ§åˆ¶å°è¿è¡Œï¼š

// 1. å¼ºåˆ¶é‡æ–°åŠ è½½ç»„ä»¶æ•°æ®
if (typeof loadData === 'function') {
    loadData();
    console.log('å·²è°ƒç”¨loadDataå‡½æ•°');
} else {
    console.log('loadDataå‡½æ•°ä¸å¯ç”¨');
}

// 2. æ¸…é™¤æ‰€æœ‰ç¼“å­˜å¹¶åˆ·æ–°
localStorage.clear();
sessionStorage.clear();
location.reload(true);
            `;
            
            const codeBlock = document.createElement('div');
            codeBlock.className = 'code-block';
            codeBlock.textContent = commands;
            document.getElementById('test-results').appendChild(codeBlock);
        }

        // é¡µé¢åŠ è½½æ—¶çš„æç¤º
        window.onload = function() {
            log('env-results', 'ğŸ“„ è°ƒè¯•å·¥å…·å·²åŠ è½½', 'success');
            log('env-results', 'ğŸ’¡ è¯·åœ¨ä¸»åº”ç”¨é¡µé¢æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œç„¶åä½¿ç”¨æ­¤é¡µé¢çš„æŒ‰é’®ç”Ÿæˆè°ƒè¯•å‘½ä»¤', 'info');
        };
    </script>
</body>
</html>